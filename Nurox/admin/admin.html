<!DOCTYPE html>
<html>
<head>
<title>NUROX Admin Panel</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'Inter',sans-serif;background:linear-gradient(135deg,#0f172a,#020617);color:#e2e8f0;min-height:100vh;}
.login-wrap{max-width:400px;margin:120px auto;padding:0 20px;}
.login-box{background:rgba(30,41,59,0.95);padding:40px;border-radius:20px;border:1px solid #1e293b;}
.login-box h2{font-size:22px;font-weight:800;margin-bottom:6px;}
.login-box p{font-size:13px;color:#94a3b8;margin-bottom:24px;}
.login-box input{width:100%;padding:12px 16px;border-radius:10px;border:1px solid #334155;background:#0f172a;color:white;font-size:14px;margin-bottom:12px;outline:none;}
.login-box input:focus{border-color:#ef4444;}
.btn{padding:12px 24px;border:none;border-radius:10px;font-weight:700;cursor:pointer;font-size:14px;transition:0.2s;}
.btn:hover{opacity:0.85;}
.btn-red{background:linear-gradient(135deg,#ef4444,#dc2626);color:white;width:100%;}
.btn-green{background:linear-gradient(135deg,#22c55e,#16a34a);color:white;}
.btn-gray{background:#334155;color:#e2e8f0;}
.btn-sm{padding:7px 16px;font-size:13px;}
.err{color:#f87171;font-size:13px;margin-top:10px;text-align:center;}
.topbar{background:rgba(15,23,42,0.98);padding:14px 32px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #1e293b;}
.admin-badge{background:#ef4444;padding:3px 10px;border-radius:20px;font-size:11px;font-weight:700;}
.container{max-width:1200px;margin:auto;padding:32px 20px;}
.hidden{display:none;}
.loading{color:#94a3b8;font-size:14px;padding:20px 0;text-align:center;}
</style>
</head>
<body>

<div id="loginPage">
  <div class="login-wrap">
    <div class="login-box">
      <h2>üîê Admin Panel</h2>
      <p>NUROX restricted access only</p>
      <input id="adminUser" type="text" placeholder="Admin Username" />
      <input id="adminPass" type="password" placeholder="Admin Password" />
      <button class="btn btn-red" onclick="doAdminLogin()">Access Panel</button>
      <div class="err" id="loginErr"></div>
    </div>
  </div>
</div>

<div id="mainPanel" class="hidden">
  <div class="topbar">
    <div>üöÄ NUROX <span class="admin-badge">ADMIN</span></div>
    <button class="btn btn-gray btn-sm" onclick="doLogout()">Logout</button>
  </div>
  <div class="container">
    <div id="statsGrid"><div class="loading">Loading stats...</div></div>
    <div id="usersTable"><div class="loading">Loading users...</div></div>
  </div>
</div>

<script>

// üî• REPLACE THIS WITH YOUR REAL RENDER URL
const API = "https://YOUR-RENDER-APP.onrender.com";

let adminCredentials = null;

function doAdminLogin() {
  const u = document.getElementById("adminUser").value.trim();
  const p = document.getElementById("adminPass").value.trim();

  if (!u || !p) {
    document.getElementById("loginErr").textContent = "Fill in both fields.";
    return;
  }

  adminCredentials = btoa(u + ":" + p);

  fetch(`${API}/shadow-admin/stats`, {
    headers: { "Authorization": `Basic ${adminCredentials}` }
  }).then(res => {
    if (res.ok) {
      document.getElementById("loginPage").classList.add("hidden");
      document.getElementById("mainPanel").classList.remove("hidden");
      loadStats();
      loadUsers();
    } else {
      document.getElementById("loginErr").textContent = "Wrong credentials.";
      adminCredentials = null;
    }
  }).catch(() => {
    document.getElementById("loginErr").textContent = "Cannot connect to server.";
  });
}

function doLogout() {
  adminCredentials = null;
  document.getElementById("loginPage").classList.remove("hidden");
  document.getElementById("mainPanel").classList.add("hidden");
}

async function loadStats() {
  const res = await fetch(`${API}/shadow-admin/stats`, {
    headers: { "Authorization": `Basic ${adminCredentials}` }
  });
  const data = await res.json();
  document.getElementById("statsGrid").innerHTML =
    `<pre style="color:#22c55e;">${JSON.stringify(data, null, 2)}</pre>`;
}

async function loadUsers() {
  const res = await fetch(`${API}/shadow-admin/users`, {
    headers: { "Authorization": `Basic ${adminCredentials}` }
  });
  const data = await res.json();
  document.getElementById("usersTable").innerHTML =
    `<pre style="color:#93c5fd;">${JSON.stringify(data, null, 2)}</pre>`;
}

</script>
</body>
</html>